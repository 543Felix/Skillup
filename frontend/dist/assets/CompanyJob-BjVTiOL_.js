import{r as l,b as O,u as $,A as j,j as e,F as J,f as P,I as V,t as z,B as y,v as B,C as U}from"./index-CQ5qcvqF.js";const X=({jobId:d,jobName:x,hidePage:u})=>{const[p,h]=l.useState([]),[g,f]=l.useState(""),[N,v]=l.useState(""),[k,C]=l.useState(""),[w,S]=l.useState(""),[D,b]=l.useState(!1),[I,t]=l.useState(!1),[a,n]=l.useState(""),i=O(),o=$(s=>s.companyRegisterData._id),m=["rejected","selected","shortListed"];l.useEffect(()=>{j.get(`/company/appliedDevelopers/${d}`).then(s=>{console.log("data = ",s.data.data),h(s.data.data)}).catch(s=>{console.log("error = ",s)})},[d]);const _=(s,r)=>{console.log("devId = ",r),r?j.patch(`/company/changeProposalStatus/${d}`,{status:s,devId:r}).then(c=>{const R=[...p].map(A=>A.developerId===r?{...A,status:s}:A);h(R),z.emit("notification",{senderId:o,receiverId:r,content:`your job proposal for ${x} got ${s} `}),y.success(c.data.message)}).catch(c=>{y.error(c.response.data.message)}):console.log("Developer ID is undefined")},E=(s,r)=>{const c=s.target.value;S(c),_(c,r)},M=(s,r,c)=>{f(s),v(c),C(r),b(!0)},T=s=>{n(s),t(!0)},F=s=>{i("/company/pdfView",{state:{url:s}})};return e.jsx(e.Fragment,{children:D===!1?e.jsxs(e.Fragment,{children:[I&&a.length>0&&e.jsx("div",{className:"h-screen fixed w-screen top-0 z-[9999] bottom-0 left-0 flex justify-center items-center backdrop-blur-md",children:e.jsxs("div",{className:"h-auto w-[600px] bg-black border-2 rounded-3xl shadow-custom-black pt-0 p-10",children:[e.jsx("div",{className:"flex justify-end items-center my-4",children:e.jsx(J,{className:"text-white h-7",icon:P,onClick:()=>t(!1)})}),e.jsxs("div",{className:"flex flex-col border border-violet p-5 rounded-2xl",children:[e.jsx("h1",{className:"text-white text-lg font-bold",children:"Cover Letter"}),e.jsx("textarea",{name:"",id:"",rows:10,value:a,className:"my-5 resize-none rounded-md"}),e.jsx("div",{className:"flex justify-end"})]})]})}),e.jsx("div",{className:"w-screen px-4",children:e.jsx("div",{className:"col-span-12 w-full",children:e.jsx("div",{className:"grid gap-2 grid-cols-1 lg:grid-cols-1",children:e.jsxs("div",{className:"bg-black p-4 shadow-lg rounded-lg",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("h1",{className:"font-bold text-white text-xl",children:"Applied Developers"}),e.jsx(J,{className:"text-white h-7",icon:P,onClick:u})]}),e.jsx("div",{className:"mt-4",children:e.jsx("div",{className:"flex flex-col",children:e.jsx("div",{className:"-my-2 overflow-x-auto",children:e.jsx("div",{className:"py-2 align-middle inline-block min-w-full",children:e.jsx("div",{className:"shadow overflow-hidden sm:rounded-lg",children:p.length>0?e.jsxs("table",{className:"min-w-full",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 bg-black text-xs leading-4 font-medium text-gray-500 uppercase tracking-wider",children:e.jsx("div",{className:"flex cursor-pointer",children:e.jsx("span",{className:"mr-2"})})}),e.jsx("th",{className:"px-6 py-3 bg-black text-xs leading-4 font-medium text-gray-500 uppercase tracking-wider",children:e.jsx("div",{className:"flex cursor-pointer",children:e.jsx("span",{className:"mr-2",children:"Applied Date"})})}),e.jsx("th",{className:"px-6 py-3 bg-black text-xs leading-4 font-medium text-gray-500 uppercase tracking-wider",children:e.jsx("div",{className:"flex cursor-pointer",children:e.jsx("span",{className:"mr-2",children:"NAME"})})}),e.jsx("th",{className:"px-6 py-3 bg-black text-xs leading-4 font-medium text-gray-500 uppercase tracking-wider",children:e.jsx("div",{className:"flex cursor-pointer",children:e.jsx("span",{className:"mr-2",children:"Email"})})}),e.jsx("th",{className:"px-6 py-3 bg-black text-xs leading-4 font-medium text-gray-500 uppercase tracking-wider",children:e.jsx("div",{className:"flex cursor-pointer",children:e.jsx("span",{className:"mr-2",children:"Cover Letter"})})}),e.jsx("th",{className:"px-6 py-3 bg-black text-xs leading-4 font-medium text-gray-500 uppercase tracking-wider",children:e.jsx("div",{className:"flex cursor-pointer",children:e.jsx("span",{className:"mr-2",children:"Cover Letter"})})}),e.jsx("th",{className:"px-6 py-3 bg-black text-xs leading-4 font-medium text-gray-500 uppercase tracking-wider",children:e.jsx("div",{className:"flex cursor-pointer",children:e.jsx("span",{className:"mr-2",children:"STATUS"})})}),e.jsx("th",{className:"px-6 py-3 bg-black text-xs leading-4 font-medium text-gray-500 uppercase tracking-wider",children:e.jsx("div",{className:"flex cursor-pointer",children:e.jsx("span",{className:"mr-2",children:"ACTION"})})}),e.jsx("th",{className:"px-6 py-3 bg-black text-xs leading-4 font-medium text-gray-500 uppercase tracking-wider",children:e.jsx("div",{className:"flex cursor-pointer",children:e.jsx("span",{className:"mr-2"})})})]})}),e.jsx("tbody",{className:"bg-black",children:p.map((s,r)=>e.jsxs("tr",{children:[e.jsx("td",{className:"px-6 py-4 text-white whitespace-no-wrap text-sm leading-5",children:e.jsx("p",{children:r+1})}),e.jsx("td",{className:"px-6 py-4 text-white whitespace-no-wrap text-sm leading-5",children:e.jsx("p",{children:new Date(s?.createdAt).toISOString().split("T")[0]})}),e.jsx("td",{className:"px-6 py-4 text-white whitespace-no-wrap text-sm leading-5",children:e.jsx("p",{children:s?.name})}),e.jsx("td",{className:"px-6 py-4 text-white whitespace-no-wrap text-sm leading-5",children:e.jsx("p",{children:s?.email})}),e.jsx("td",{className:"px-6 py-4 text-white whitespace-no-wrap text-sm leading-5",children:e.jsx("p",{onClick:()=>T(s?.coverLetter),children:"View Cover Letter"})}),e.jsx("td",{className:"px-6 py-4 text-white whitespace-no-wrap text-sm leading-5",children:e.jsx("p",{onClick:()=>F(s.resume),children:"View Resume"})}),e.jsx("td",{className:"px-6 py-4 whitespace-no-wrap text-sm leading-5",children:e.jsx("div",{className:`${s.status==="selected"?"text-green-500":s.status==="rejected"?"text-red-500":"text-orange"}`,children:e.jsx("p",{children:s.status})})}),e.jsx("td",{className:"px-6 py-4 flex justify-center items-center whitespace-no-wrap text-sm leading-5",children:e.jsx("select",{className:"text-white items-center bg-black",name:"status",value:w,id:"",onChange:c=>E(c,s.developerId),children:m.length>0&&m.map((c,L)=>e.jsx("option",{value:c,onClick:()=>_(c,s.developerId),children:c},L))})}),e.jsx("td",{children:e.jsx("button",{className:"bg-violet px-4 py-1 text-white rounded-[5px] font-semibold",onClick:()=>M(s.developerId,s.name,s.image),children:"Message"})})]},s.developerId))})]}):e.jsx("div",{className:"flex justify-center text-white text-3xl font-semibold py-5",children:e.jsx("h1",{children:"No one applied for the job"})})})})})})})]})})})})]}):e.jsx("div",{className:"absolute z-50 h-screen w-screen top-0 bottom-0 left-0 right-0",children:e.jsx(V,{role:"companies",senderId:o,senderModel:"companies",receiverModel:"developers",receiverId:g,profileImg:N,name:k,closeChat:b})})})},G=()=>{const d=$(t=>t.companyRegisterData._id),[x,u]=l.useState([]),[p,h]=l.useState(""),[g,f]=l.useState(!1),[N,v]=l.useState(!1),[k,C]=l.useState("");l.useEffect(()=>{d&&j.get(`/company/allJobs/${d}`).then(t=>{console.log("jobs = ",t.data.response),u(t.data.response)}).catch(t=>{console.error("Error fetching data: ",t)})},[d,g]);const w=(t,a,n)=>{t.stopPropagation(),j.patch(`/company/setStatus?id=${n}`,{status:a}).then(i=>{if(i.data.message){const o=x.map(m=>m._id===n?{...m,status:a}:m);console.log(o),u(o),y.success(i.data.message)}}).catch(i=>{console.log(i)})},S=t=>{h(t),f(!0)},D=(t,a)=>{t.stopPropagation(),j.delete(`/company/deleteJob/${a}`).then(n=>{const i=x.filter(o=>o._id!==a);u(i),y.success(n.data.message)}).catch(n=>{console.log(n)})},b=(t,a,n)=>{t.stopPropagation(),console.log(""),h(a),C(n),v(!0)},I=()=>{h(""),v(!1)};return e.jsx(e.Fragment,{children:g===!1&&N===!1?e.jsx("div",{className:"",children:x.length>0&&x.map(t=>e.jsx("div",{className:"w-screen flex justify-center items-center",children:e.jsxs("div",{className:"bg-slate-600 bg-opacity-[5%] rounded-[15px] shadow-custom-black h-[280px] w-[730px] mt-[15px] px-5 py-3 text-white",onClick:()=>S(t._id),children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("h1",{className:"text-2xl font-bold",children:t.jobTitle}),e.jsxs("div",{className:"flex space-x-2 items-center",children:[t.status==="open"?e.jsx("button",{className:"bg-violet text-xs px-2 py-1 rounded-[5px]",onClick:a=>w(a,"closed",t._id),children:"Close  vaccancy"}):t.status==="closed"?e.jsx("button",{className:"bg-violet text-xs  rounded-[5px] px-2 py-1",onClick:a=>w(a,"open",t._id),children:"open  vaccany"}):"",e.jsx(J,{className:"text-white h-5",icon:B,onClick:a=>D(a,t._id)})]})]}),e.jsx("div",{children:e.jsx("h1",{className:"mt-2 max-h-[70px] overflow-y-auto",children:t.description})}),e.jsx("div",{className:"mt-3 h-[80px] overflow-y-auto ",children:t.skills.length>0&&t.skills.map((a,n)=>e.jsx("button",{className:"bg-transparent mt-1 border-violet border-2 rounded-[8px] mr-[5px] px-4 py-[3px]",children:a},n))}),e.jsx("div",{className:" my-4 flex justify-end space-x-2 ",children:e.jsx("button",{className:"bg-violet text-white px-5 py-1 font-semibold rounded-[5px]",onClick:a=>b(a,t._id,t.jobTitle),children:"Show Applied Developers"})})]},t._id)}))}):g===!0?e.jsx(U,{action:"editJob",jobId:p,setShowData:f}):N===!0?e.jsx(X,{jobId:p,jobName:k,hidePage:I}):e.jsx(e.Fragment,{})})};export{G as default};
