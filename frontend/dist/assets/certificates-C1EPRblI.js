import{u as P,n as q,r as s,A as C,j as e,F as g,o as Z,a as T,f as R,d as O,p as X,q as Y,B as r,s as B,e as _,b as J,h as M}from"./index-B7X6NYaZ.js";const G=({setLoader:o,role:d})=>{const p=P(n=>d==="dev"?n.developerRegisterData._id:d==="company"?n.companyRegisterData._id:null),b=q(),[m,j]=s.useState(!1),[S,D]=s.useState(null),y=s.useRef(null),[x,w]=s.useState(null),[N,v]=s.useState(!1),[f,$]=s.useState({name:"",email:"",phoneNo:"",image:""}),[I,t]=s.useState(""),[i,A]=s.useState({name:"",email:"",phoneNo:""}),[u,a]=s.useState({name:"",email:"",phoneNo:""});s.useEffect(()=>{C.get(`/${d}/profile?id=${p}`).then(n=>{if(n&&n.data.data){const{name:l,email:h,phoneNo:k,image:U}=n.data.data;console.log("data",{name:l,email:h,phoneNo:k,image:U}),$({name:l,email:h,phoneNo:k,image:U}),a({name:l,email:h,phoneNo:k})}console.log("jkdsfa")}).catch(n=>{console.log("error = ",n)})},[I,i,p,d]);function c(){y.current?.click()}function F(n){const l=n.target.files?.[0];if(w(l),l){const h=URL.createObjectURL(l);D(h)}}function z(n){n&&(o(!0),O(n).then(l=>{if(l){const h=l.url;C.post(`/${d}/uploadProfile?id=${p}`,{url:h}).then(()=>{j(!1);const k=JSON.stringify({_id:p,image:l});d==="dev"?(localStorage.setItem("developerData",k),b(X({image:h}))):d==="company"&&(localStorage.setItem("companyData",k),b(Y({image:h}))),t(l.url),r.success("image uploaded  successfully")})}}).catch(l=>{console.log(l)}).finally(()=>{o(!1)}))}function E(n){const{name:l,value:h}=n.target;a(k=>({...k,[l]:h}))}function V(n){if(n.preventDefault(),!u.name||!u.email||!u.phoneNo){r.error("Please fill in every field");return}else if(u.name.match("^[A-Z][a-zA-Z]{2,28}(?: [a-zA-Z]+)*$"))if(/^[a-z0-9]+@gmail\.com$/.test(u.email))if(u.phoneNo.match("^\\d{10}$"))console.log("entered to the else"),C.post(`/${d}/profileData?id=${p}`,{formData:u}).then(l=>{l.status===200&&(r.success("Profile updated"),A(l.data.data),console.log("data = ",l.data.data))}).catch(l=>{r.error(l.message)}).finally(()=>{v(!1)});else{r.error("Enter a valid phone number");return}else{console.log("invalid email address"),r.error("Invalid email address.");return}else{r.error("This field should start with a capital letter with at least 3 characters");return}}return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"w-[250px] bg-slate-500 bg-opacity-[15%] rounded-[15px] shadow-lg shadow-black",children:[e.jsxs("div",{className:" flex flex-col space-y-2 justify-center items-center py-5 text-white",children:[f&&f.image?e.jsx("img",{src:`${f.image}`,className:"h-20 w-20 rounded-full"}):e.jsx(g,{className:"h-20 text-white",icon:Z}),e.jsx("button",{className:"bg-violet px-5 py-1 font-semibold rounded",onClick:()=>{j(!0)},children:"Edit Profile"})]}),e.jsxs("div",{className:"relative px-1 py-2 border-t items-center ",children:[e.jsx("div",{className:"absolute right-3 border-2 rounded-full h-6 w-6 text-white  border-white flex justify-center items-center",onClick:()=>v(!0),children:e.jsx(g,{className:"flex items-center h-3  w-3",icon:T})}),f&&e.jsxs(e.Fragment,{children:[e.jsx("input",{defaultValue:f.name,type:"text",className:"text-lg font-bold   bg-transparent  border-none focus:outline-none focus:ring-0 text-white",readOnly:!0}),e.jsx("input",{defaultValue:f.email,type:"text",className:"text-base font-light   bg-transparent border-none focus:outline-none focus:ring-0 text-white ",readOnly:!0}),e.jsx("input",{defaultValue:f.phoneNo,type:"text",className:"text-base font-light  bg-transparent border-none focus:outline-none focus:ring-0 text-white ",readOnly:!0})]})]})]}),m&&e.jsx("div",{className:"fixed top-0 left-0 z-30 w-full h-full flex justify-center items-center bg-black bg-opacity-45",children:e.jsxs("div",{className:"h-[350px] w-[450px] bg-[#1F2937] rounded-[25px] p-5 ",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("h1",{className:"text-white text-2xl font-semibold",children:"Edit photo "}),e.jsx(g,{className:"h-6 text-white",icon:R,onClick:()=>j(!1)})]}),e.jsx("div",{className:"flex items-center",children:S?e.jsx("img",{src:S,alt:"selected",className:"h-[130px] mt-10 w-[130px]"}):e.jsx(e.Fragment,{children:f.image?e.jsx("img",{src:`${f.image}`,alt:"selected",className:"h-[130px] mt-10 w-[130px] rounded-full"}):e.jsx("div",{className:" h-[130px] mt-10 w-[130px] flex justify-center items-center ",children:e.jsx(g,{className:"h-24 text-white",icon:Z})})})}),e.jsx("input",{ref:y,type:"file",name:"",id:"",hidden:!0,onChange:F}),e.jsxs("div",{className:"flex justify-end",children:[e.jsx("button",{className:"text-xl text-lightViolet font-semibold  mr-4 ",onClick:c,children:"Change Image"}),e.jsx("button",{className:"bg-violet px-5 py-2 mt-2 text-white",onClick:()=>z(x),children:"Save Image"})]})]})}),N&&e.jsx("div",{className:"fixed top-0 left-0 z-30 w-full h-full flex justify-center items-center bg-black bg-opacity-45",children:e.jsxs("div",{className:"h-[350px] w-[450px] bg-[#1F2937] rounded-[25px] p-5 ",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("h1",{className:"text-white text-2xl font-semibold",children:"Edit Data "}),e.jsx(g,{className:"h-6 text-white",icon:R,onClick:()=>v(!1)})]}),e.jsxs("form",{className:"p-8 grid h-[300px] space-y-2 text-white",children:[e.jsx("input",{value:u.name,name:"name",type:"text",className:"border-2 border-white bg-transparent rounded-[10px] pl-4 focus:outline-none focus:ring-0 focus:border-white",onChange:n=>E(n),required:!0,pattern:"^[A-Z][a-zA-Z]{2,28}(?: [a-zA-Z]+)*$",title:"Name must be at least 3 characters long, start with a capital letter, and contain only alphabets."}),e.jsx("input",{value:u.email,name:"email",type:"text",className:"border-2 border-white bg-transparent rounded-[10px] pl-4 focus:outline-none focus:ring-0 focus:border-white",onChange:E,required:!0,pattern:"^[a-z0-9]+@gmail\\.com$",title:"Enter a valid email address"}),e.jsx("input",{value:u.phoneNo,name:"phoneNo",type:"text",className:"border-2 border-white bg-transparent rounded-[10px] pl-4 focus:outline-none focus:ring-0 focus:border-white",onChange:E,required:!0,pattern:"^\\d{10}$",title:"Enter a valid contac no"}),e.jsx("div",{className:"flex flex-col",children:e.jsx("button",{className:"bg-violet self-end px-4 py-2 rounded-[25px]",onClick:V,children:"Save changes"})})]})]})})]})},H=({role:o})=>{const[d,p]=s.useState(!1),b=P(t=>o==="dev"?t.developerRegisterData._id:t.companyRegisterData._id),m=o==="dev"?"Skills":o==="company"?"Specialties":"",[j,S]=s.useState([]),[D,y]=s.useState(""),[x,w]=s.useState([]),[N,v]=s.useState([]);s.useEffect(()=>{C.get(`/${o}/profile?id=${b}`).then(t=>{if(t.data.data){const i=o==="dev"?t.data.data.skills:o==="company"?t.data.data.specialties:"";S(i),w(()=>[...i])}})},[b,N,m,o]);function f(t){const i=[...x];i.splice(t,1),w([...i])}function $(t){if(t.trim().length===0){r.error(`cannot add empty string as a ${m}`);return}if(t.match(/^\s*[a-zA-Z0-9 ]+\s*(,\s*[a-zA-Z0-9 ]+\s*)*$/)){const i=x.length,A=t.split(",").filter(u=>u.trim()!==""&&!x.includes(u));if(i>20){r.error(`maximum ${m} allowded is 20`);return}w([...x,...A]),y("")}else{r.error(`You can add ${m} one by one or separated by commas without any special characters.`);return}}function I(t){t.preventDefault(),C.post(`/${o}/update${m}?id=${b}`,{data:x}).then(i=>{v([...i.data.data]),r.success("skill updated in the profile"),p(!1)}).catch(i=>{r.error(i.message)})}return e.jsxs(e.Fragment,{children:[d&&e.jsx("div",{className:"fixed top-0 pt-0 left-0 z-30 w-full h-full flex justify-center items-center bg-black bg-opacity-45 ",children:e.jsxs("div",{className:"h-[auto] w-[550px] bg-[#1F2937] rounded-[25px] justify-center items-center p-5 ",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsxs("h1",{className:"text-white text-2xl font-semibold",children:["Edit ",m]}),e.jsx(g,{className:"h-6 text-white hover:text-violet",icon:R,onClick:()=>p(!1)})]}),e.jsxs("div",{className:`my-10  bg-white\r
    h-[auto] w-[510px] p-4  rounded-[25px]`,children:[e.jsx("div",{className:"flex text-black w-[500px] flex-wrap",children:x.length>0&&x.map((t,i)=>e.jsxs("div",{className:"flex border-2 border-black rounded-[15px] items-center justify-center px-2 py-1 mt-2 mr-2 transform hover:scale-105 transition-transform duration-300",children:[e.jsx("button",{className:"text-sm px-2",children:t}),e.jsx(g,{className:"h-4 text-black pr-2",icon:B,onClick:()=>{f(i)}})]},i))}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"text",value:D,className:"mt-3 w-[450px] h-10 rounded-[15px] border-2 focus:outline-none border-black bg-transparent text-black pl-5 focus:ring-0 focus:border-black",onChange:t=>y(t.target.value),pattern:"^\\s*[a-zA-Z0-9 ]+\\s*(,\\s*[a-zA-Z0-9 ]+\\s*)*$",title:"You can add skills one by one or separated by commas without any special characters."}),e.jsx("button",{className:"bg-black px-3 absolute right-[29px] mt-[12px] h-[40px] rounded-r-[15px] items-center justify-center border border-black",onClick:()=>$(D),children:"Add +"})]})]}),e.jsx("div",{className:"flex flex-col",children:e.jsx("button",{className:"self-end bg-violet px-3 py-2 rounded-[25px]",onClick:I,children:"Save changes"})})]})}),e.jsxs("div",{className:"max-h-[320px] bg-slate-500 bg-opacity-[15%] shadow-lg shadow-black rounded-[15px] p-6 ",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("h1",{className:"text-2xl text-white font-bold font-serif",children:[m," :"]}),e.jsx(g,{className:"flex items-center h-[30px]  ",icon:_,onClick:()=>p(!0)})]}),j&&e.jsx("div",{className:"py-4",children:j.map((t,i)=>e.jsx("button",{className:"justify-center items-center bg-transparent border-2 border-violet text-white px-4 py-[6px]  mr-3 mb-3 rounded-[8px]",children:t},i))})]})]})},K=({setLoader:o})=>{const d=P(a=>a?.developerRegisterData._id),[p,b]=s.useState(!1),[m,j]=s.useState(""),[S,D]=s.useState(),y=s.useRef(null),[x,w]=s.useState(""),[N,v]=s.useState([]),f=J();s.useEffect(()=>{C.get(`/dev/profile?id=${d}`).then(a=>{if(a.data.data){const{certificates:c}=a.data.data;v(c)}})},[d]);const $=()=>{y.current.click()},I=a=>{const c=a.target.files&&a.target.files[0];c&&(j(URL.createObjectURL(c)),D(c))},t=a=>{if(a.preventDefault(),S)if(x.trim().length===0){r.error("Certificate name cannot be empty");return}else o(!0),O(S).then(c=>{C.patch("/dev/uploadCertificates",{url:c?.url,id:d,certificateName:x}).then(F=>{F.status===200&&(v(z=>[...z,{url:c?.url,certificateName:x}]),i(),r.success("certificates uploaded successfully"))}).catch(()=>{})}).catch(c=>{r.error(c)}).finally(()=>{o(!1)});else r.error("select certificates")};function i(){b(!1),j(""),D(void 0),w("")}const A=async a=>{f("/dev/pdfView",{state:{url:a}})},u=a=>{o(!0),C.patch("/dev/deleteCertificate",{id:d,url:a,resourcetype:"image"}).then(c=>{console.log("response after deleting certificate = ",c),c.status===200&&(v(F=>F.filter(z=>z.url!==a)),r.success(c.data.message))}).catch(c=>{r.error(c)}).finally(()=>{o(!1)})};return e.jsxs(e.Fragment,{children:[p&&e.jsx("div",{className:"fixed top-0 left-0 z-10 w-full h-full flex justify-center items-center bg-black bg-opacity-65",children:e.jsxs("div",{className:"bg-slate-800 px-10 py-5 h-auto w-[600px] rounded-[25px]",children:[e.jsxs("div",{className:"flex justify-between  ",children:[e.jsx("h1",{className:"text-white font-semibold  text-2xl",children:"Upload Certificate"}),e.jsx(g,{icon:R,className:"text-white h-7",onClick:i})]}),e.jsx("div",{}),m&&e.jsxs("div",{className:"flex flex-col space-y-2",children:[e.jsx("iframe",{className:"w-[300px] h-[250px]",src:m}),e.jsx("input",{className:"text-black placeholder:text-gray-700 w-2/3",placeholder:"Enter certificate name",onChange:a=>w(a.target.value),type:"text"})]}),e.jsxs("div",{className:"flex justify-end pt-5",children:[e.jsx("input",{type:"file",ref:y,hidden:!0,onChange:I,accept:".pdf"}),e.jsx("button",{className:"text-violet mr-5",onClick:$,children:"choose file"}),e.jsx("button",{className:"bg-violet text-white px-5 justify-center items-center p-1 rounded-[15px]",onClick:t,children:"upload"})]})]})}),e.jsxs("div",{className:" mt-2 bg-slate-500 bg-opacity-[15%] shadow-lg shadow-black rounded-[10px] p-6 ",children:[e.jsxs("div",{className:"flex  justify-between items-center",children:[N&&N.length>0?e.jsx("h1",{className:"text-white text-2xl  font-semibold",children:"Certificates"}):e.jsx("h1",{className:"text-white text-2xl  font-semibold",children:" Add Certificates"}),e.jsx(g,{icon:_,className:"text-white  h-[30px]",onClick:()=>b(!0)})]}),N.length>0&&e.jsx("div",{className:"flex-co space-y-2 l p-5 pb-10 h-full",children:N&&N.map(a=>e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("h1",{className:"text-xl font-semibold",children:a.certificateName}),e.jsx("button",{className:"bg-violet text-white px-5 py-1 rounded-lg",onClick:()=>A(a.url),children:"view"}),e.jsx(g,{icon:M,onClick:()=>u(a.url)})]}))})]})]})};export{H as A,K as C,G as P};
