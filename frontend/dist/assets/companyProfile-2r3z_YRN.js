import{r as l,u as k,A as j,j as e,F as y,f as O,M as D,B as h,N as z,O as $,P as A,L as F}from"./index-DLwwp0ZK.js";import{P as I,A as P}from"./addSkills-BrjIJIIF.js";const R=({setLoader:c})=>{const[x,i]=l.useState(!1),[d,f]=l.useState({companyType:"",noOfEmployes:"",website:"",overview:""}),[r,g]=l.useState({companyType:"",noOfEmployes:"",website:"",overview:""}),[N,v]=l.useState({companyType:"",noOfEmployes:"",website:"",overview:""}),p=k(a=>a?.companyRegisterData._id);l.useEffect(()=>{j.get(`/company/profile?id=${p}`).then(a=>{if(a.data.data){console.log("data =",a.data.data);const{companyType:o,noOfEmployes:n,website:s,overview:t}=a.data.data;f({companyType:o,noOfEmployes:n,website:s,overview:t}),g({companyType:o,noOfEmployes:n,website:s,overview:t})}})},[p,N]);function u(a){const{name:o,value:n}=a.target;g(s=>({...s,[o]:n}))}function C(a){a.preventDefault(),c(!0);const{noOfEmployes:o,website:n,overview:s}=r;if(o.length===0){h.error("Company size cannot be empty");return}if(!o.match(/^\d{1,4}(?:-\d{1,4})?|^\d+k(?:-\d+k)?$/)){h.error('Either use a number or range; if it has more than 4 digits, use "k"');return}if(n.length>0&&!n.match(/^(https?:\/\/)?(www\.)?([a-zA-Z0-9-]+\.){1,}[a-zA-Z]{2,}(\.[a-zA-Z]{2,})?\/?([^\s]*)$/)){h.error("Invalid URL syntax");return}if(s.length>0&&!s.match(/^[\w\s.,'’+—-]+$/)){h.error("Invalid overview format");return}j.post(`/company/updateAbout?id=${p}`,{formData:r}).then(t=>{if(t.data.data){i(!1);const{companyType:m,noOfEmployes:b,website:w,overview:E}=t.data.data;v(S=>({...S,companyType:m,noOfEmployes:b,website:w,overview:E})),console.log("resData = ",t.data.data)}}).catch(t=>{console.log("err = ",t),h.error("hh")}).finally(()=>{c(!1)})}return e.jsxs(e.Fragment,{children:[x&&e.jsx("div",{className:"fixed top-0 left-0 z-10 w-full h-full flex justify-center items-center bg-black bg-opacity-65",children:e.jsxs("div",{className:"bg-slate-800 p-[70px] rounded-[25px]",children:[e.jsxs("div",{className:"relative  flex flex-col",children:[e.jsx(y,{icon:O,className:"absolute text-white top-0 right-0 h-8",onClick:()=>i(!1)}),e.jsxs("div",{className:"flex flex-row justify-between",children:[e.jsxs("div",{className:"flex flex-col mr-6",children:[e.jsx("label",{className:"text-white text-sm font-light ",children:"Company type :"}),e.jsxs("select",{value:r.companyType,onChange:a=>u(a),name:"companyType",className:"mt-1 bg-transparent text-white text-lg border py-1 px-2 rounded-[8px] w-[240px] border-white focus:outline-none focus:ring-0 focus:border-white",children:[e.jsx("option",{value:"service",className:"bg-transparent text-white hover:bg-black",children:"Service Based"}),e.jsx("option",{value:"product",className:"bg-transparent text-white",children:"Product Based"})]})]}),e.jsxs("div",{className:"flex flex-col mr-[180px] ",children:[" ",e.jsx("label",{className:"text-white text-sm font-light",children:"Company size :"}),e.jsx("input",{value:r.noOfEmployes,type:"text",name:"noOfEmployes",className:"mt-1 bg-transparent text-white text-lg border rounded-[8px] border-white py-1 px-2 focus:outline-none focus:ring-0 focus:border-white",placeholder:"Company Size",onChange:a=>u(a),required:!0,pattern:"^\\d{0,4}(?:-\\d{1,4}|k\\d{1,4}|k)?$",title:""})]})]}),e.jsx("label",{className:"text-white text-sm font-light mt-2",children:"Website url :"}),e.jsx("input",{value:r.website,type:"url",name:"website",className:"mt-1 bg-transparent text-white text-lg border rounded-[8px] border-white py-1 px-2 focus:outline-none focus:ring-0 focus:border-white",placeholder:"Website URL",onChange:a=>u(a)}),e.jsx("label",{className:"text-white text-sm font-light mt-2",children:"Overview :"}),e.jsx("textarea",{value:r.overview,name:"overview",className:"mt-1 text-white text-lg  py-1 px-2 font-semibold rounded-[8px] bg-transparent border h-[100px] focus:outline-none border-white resize-none focus:ring-0 focus:border-white",placeholder:"Overview",onChange:a=>u(a)})]}),e.jsx("div",{className:"flex justify-end",children:e.jsx("button",{className:"bg-violet text-white px-2 py-1 rounded-[25px] mt-5",onClick:a=>C(a),children:"Save changes"})})]})}),e.jsx("div",{className:"col-start-2 col-span-3 ml-2 bg-slate-500 bg-opacity-[15%] shadow-lg shadow-black rounded-[10px] py-5 px-12 z-0",children:e.jsxs("div",{className:"relative  flex flex-col",children:[e.jsx(y,{icon:D,className:"absolute text-white top-0 right-0",onClick:()=>i(!0)}),e.jsxs("div",{className:"flex flex-row justify-between",children:[e.jsxs("div",{className:"flex flex-col mr-6",children:[e.jsx("label",{className:"text-white text-sm font-light ",children:"Company type :"}),e.jsx("input",{defaultValue:d.companyType,type:"text",className:"mt-1 bg-transparent text-white text-lg border py-1 px-2 rounded-[8px] focus:border-white focus:ring-0 border-white focus:outline-none",placeholder:"Product based",readOnly:!0})]}),e.jsxs("div",{className:"flex flex-col mr-[180px] ",children:[" ",e.jsx("label",{className:"text-white text-sm font-light",children:"Number of employes :"}),e.jsx("input",{defaultValue:d.noOfEmployes,type:"text",className:"mt-1 bg-transparent text-white text-lg border rounded-[8px] focus:border-white focus:ring-0 border-white py-1 px-2 focus:outline-none",placeholder:"Company Size",readOnly:!0})]})]}),e.jsx("label",{className:"text-white text-sm font-light mt-2",children:"Website url :"}),e.jsx("input",{defaultValue:d.website,type:"url",className:"mt-1 bg-transparent text-white text-lg border rounded-[8px] border-white focus:border-white focus:ring-0 py-1 px-2 focus:outline-none",placeholder:"Website URL",readOnly:!0}),e.jsx("label",{className:"text-white text-sm font-light mt-2",children:"Overview :"}),e.jsx("textarea",{defaultValue:d.overview,className:"mt-1 text-white text-base  py-1 px-2 rounded-[8px] bg-transparent border h-[100px] focus:outline-none border-white focus:border-white focus:ring-0 resize-none",placeholder:"Overview",readOnly:!0})]})})]})},T=({setLoader:c})=>{const x=k(s=>s?.companyRegisterData._id),[i,d]=l.useState(!1),[f,r]=l.useState(new Array(4).fill(void 0)),[g,N]=l.useState([]),v=l.useRef(null),[p,u]=l.useState([]);l.useEffect(()=>{j.get(`/company/profile?id=${x}`).then(s=>{if(s.data.data){const{certificates:t}=s.data.data;u(t),r(()=>[...t])}})},[x]);const C=()=>{v.current.click()},a=s=>{const t=Array.from(s.target.files||[]);N(g);const m=t.map(w=>URL.createObjectURL(w)),b=m.length>0?m.slice(0,4):m.slice(0,m.length);b.length===4?r(()=>[...b]):r(w=>[...w,...b]),console.log("images = ",f)},o=s=>{s.preventDefault(),c(!0),A(g).then(t=>{console.log("after upload to cloudinary = ",{data:t}),j.post(`/company/uploadCertificates?id=${x}`,{data:t}).then(()=>{d(!1),t&&u(t),h.success("certificates uploaded successfully")})}).catch(t=>{h.error(t)}).finally(()=>{c(!1)})};function n(s){s.preventDefault(),d(!1),r(()=>[...p])}return e.jsxs(e.Fragment,{children:[i&&e.jsx("div",{className:"fixed top-0 left-0 z-10 w-full h-full flex justify-center items-center bg-black bg-opacity-65",children:e.jsxs("div",{className:"bg-slate-800 px-10 py-5 h-[300px] w-[600px] rounded-[25px]",children:[e.jsxs("div",{className:"flex justify-between  ",children:[e.jsx("h1",{className:"text-white text-xl",children:"update certificates"}),e.jsx(y,{icon:O,className:"text-white h-7",onClick:s=>n(s)})]}),e.jsx("div",{}),e.jsx("div",{className:"grid h-[100px] grid-cols-4 m-5",children:f.length>0?f.map((s,t)=>e.jsx("div",{className:`col-start-${t+1} bg-white mr-2`,children:typeof s=="string"?e.jsx("img",{src:s,alt:`Image ${t}`,className:" h-[100px]"},`image-${t}`):s==="undefined"?e.jsx("div",{className:"h-[100px] bg-white",children:e.jsx("h1",{children:"image"})}):null},t)):e.jsx("div",{className:"col-start-2 col-span-2",children:e.jsx(y,{icon:z,className:"text-white h-28"})})}),e.jsxs("div",{className:"flex justify-end pt-5",children:[e.jsx("input",{type:"file",ref:v,hidden:!0,multiple:!0,onChange:a,accept:".png, .jpg, .jpeg"}),e.jsx("button",{className:"text-violet mr-5",onClick:C,children:"choose file"}),e.jsx("button",{className:"bg-violet text-white px-5 justify-center items-center p-1 rounded-[15px]",onClick:o,children:"upload"})]})]})}),e.jsxs("div",{className:"row-start-3 mt-2 bg-slate-500 bg-opacity-[15%] shadow-lg shadow-black rounded-[10px] py-5 px-10",children:[e.jsxs("div",{className:"relative",children:[e.jsx("h1",{className:"text-white text-2xl  font-semibold",children:"Certificates"}),e.jsx(y,{icon:$,className:"text-white absolute top-0 right-5 h-[30px]",onClick:()=>d(!0)})]}),e.jsx("div",{className:"grid - grid-cols-4 p-5 pb-10 h-full",children:p?p.map((s,t)=>e.jsx("img",{src:s,className:`col-start-${t+1} text-black mr-3`,alt:""},t)):e.jsx("h1",{className:"text-gray-300",children:"No certificates added"})})]})]})},W=({role:c})=>{const[x,i]=l.useState(!1);return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"h-[900px] w-[900px] grid grid-rows-3 z-0 ",children:[e.jsxs("div",{className:" grid grid-cols-4",children:[e.jsx(I,{setLoader:i,role:c}),e.jsx(R,{setLoader:i})]}),e.jsx(P,{role:c}),e.jsx(T,{setLoader:i})]}),x&&e.jsx(F,{})]})};export{W as default};
