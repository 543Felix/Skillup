import{r as i,u as k,A as f,j as e,F as b,f as D,m as S,B as d,L as z}from"./index-BM2x66xq.js";import{P as A,A as T,C as P}from"./certificates-lFBmzjLP.js";const $=({setLoader:c})=>{const[m,s]=i.useState(!1),[x,w]=i.useState({companyType:"",noOfEmployes:"",website:"",overview:""}),[n,h]=i.useState({companyType:"",noOfEmployes:"",website:"",overview:""}),[y,v]=i.useState({companyType:"",noOfEmployes:"",website:"",overview:""}),u=k(t=>t?.companyRegisterData._id);i.useEffect(()=>{f.get(`/company/profile?id=${u}`).then(t=>{if(t.data.data){console.log("data =",t.data.data);const{companyType:r,noOfEmployes:o,website:l,overview:a}=t.data.data;w({companyType:r,noOfEmployes:o,website:l,overview:a}),h({companyType:r,noOfEmployes:o,website:l,overview:a})}})},[u,y]);function p(t){const{name:r,value:o}=t.target;h(l=>({...l,[r]:o}))}function g(t){t.preventDefault(),c(!0);const{noOfEmployes:r,website:o,overview:l}=n;if(r.length===0){d.error("Company size cannot be empty");return}if(!r.match(/^\d{1,4}(?:-\d{1,4})?|^\d+k(?:-\d+k)?$/)){d.error('Either use a number or range; if it has more than 4 digits, use "k"');return}if(o.length>0&&!o.match(/^(https?:\/\/)?(www\.)?([a-zA-Z0-9-]+\.){1,}[a-zA-Z]{2,}(\.[a-zA-Z]{2,})?\/?([^\s]*)$/)){d.error("Invalid URL syntax");return}if(l.length>0&&!l.match(/^[\w\s.,'’+—-]+$/)){d.error("Invalid overview format");return}f.post(`/company/updateAbout?id=${u}`,{formData:n}).then(a=>{if(a.data.data){s(!1);const{companyType:j,noOfEmployes:N,website:C,overview:O}=a.data.data;v(E=>({...E,companyType:j,noOfEmployes:N,website:C,overview:O})),console.log("resData = ",a.data.data)}}).catch(a=>{console.log("err = ",a),d.error("hh")}).finally(()=>{c(!1)})}return e.jsxs(e.Fragment,{children:[m&&e.jsx("div",{className:"fixed top-0 left-0 z-10 w-full h-full flex justify-center items-center bg-black bg-opacity-65",children:e.jsxs("div",{className:"bg-slate-800 p-[70px] rounded-[25px]",children:[e.jsxs("div",{className:"relative  flex flex-col",children:[e.jsx(b,{icon:D,className:"absolute text-white top-0 right-0 h-8",onClick:()=>s(!1)}),e.jsxs("div",{className:"flex flex-row justify-between",children:[e.jsxs("div",{className:"flex flex-col mr-6",children:[e.jsx("label",{className:"text-white text-sm font-light ",children:"Company type :"}),e.jsxs("select",{value:n.companyType,onChange:t=>p(t),name:"companyType",className:"mt-1 bg-transparent text-white text-lg border py-1 px-2 rounded-[8px] w-[240px] border-white focus:outline-none focus:ring-0 focus:border-white",children:[e.jsx("option",{value:"service",className:"bg-transparent text-white hover:bg-black",children:"Service Based"}),e.jsx("option",{value:"product",className:"bg-transparent text-white",children:"Product Based"})]})]}),e.jsxs("div",{className:"flex flex-col mr-[180px] ",children:[" ",e.jsx("label",{className:"text-white text-sm font-light",children:"Company size :"}),e.jsx("input",{value:n.noOfEmployes,type:"text",name:"noOfEmployes",className:"mt-1 bg-transparent text-white text-lg border rounded-[8px] border-white py-1 px-2 focus:outline-none focus:ring-0 focus:border-white",placeholder:"Company Size",onChange:t=>p(t),required:!0,pattern:"^\\d{0,4}(?:-\\d{1,4}|k\\d{1,4}|k)?$",title:""})]})]}),e.jsx("label",{className:"text-white text-sm font-light mt-2",children:"Website url :"}),e.jsx("input",{value:n.website,type:"url",name:"website",className:"mt-1 bg-transparent text-white text-lg border rounded-[8px] border-white py-1 px-2 focus:outline-none focus:ring-0 focus:border-white",placeholder:"Website URL",onChange:t=>p(t)}),e.jsx("label",{className:"text-white text-sm font-light mt-2",children:"Overview :"}),e.jsx("textarea",{value:n.overview,name:"overview",className:"mt-1 text-white text-lg  py-1 px-2 font-semibold rounded-[8px] bg-transparent border h-[100px] focus:outline-none border-white resize-none focus:ring-0 focus:border-white",placeholder:"Overview",onChange:t=>p(t)})]}),e.jsx("div",{className:"flex justify-end",children:e.jsx("button",{className:"bg-violet text-white px-2 py-1 rounded-[25px] mt-5",onClick:t=>g(t),children:"Save changes"})})]})}),e.jsx("div",{className:"w-full ml-2 bg-slate-500 bg-opacity-[15%] shadow-lg shadow-black rounded-[10px] py-5 px-12 ",children:e.jsxs("div",{className:"relative  flex flex-col",children:[e.jsx(b,{icon:S,className:"absolute text-white top-0 right-0",onClick:()=>s(!0)}),e.jsxs("div",{className:"flex flex-row justify-between",children:[e.jsxs("div",{className:"flex flex-col mr-6",children:[e.jsx("label",{className:"text-white text-sm font-light ",children:"Company type :"}),e.jsx("input",{defaultValue:x.companyType,type:"text",className:"mt-1 bg-transparent text-white text-lg border py-1 px-2 rounded-[8px] focus:border-white focus:ring-0 border-white focus:outline-none",placeholder:"Product based",readOnly:!0})]}),e.jsxs("div",{className:"flex flex-col mr-[180px] ",children:[" ",e.jsx("label",{className:"text-white text-sm font-light",children:"Number of employes :"}),e.jsx("input",{defaultValue:x.noOfEmployes,type:"text",className:"mt-1 bg-transparent text-white text-lg border rounded-[8px] focus:border-white focus:ring-0 border-white py-1 px-2 focus:outline-none",placeholder:"Company Size",readOnly:!0})]})]}),e.jsx("label",{className:"text-white text-sm font-light mt-2",children:"Website url :"}),e.jsx("input",{defaultValue:x.website,type:"url",className:"mt-1 bg-transparent text-white text-lg border rounded-[8px] border-white focus:border-white focus:ring-0 py-1 px-2 focus:outline-none",placeholder:"Website URL",readOnly:!0}),e.jsx("label",{className:"text-white text-sm font-light mt-2",children:"Overview :"}),e.jsx("textarea",{defaultValue:x.overview,className:"mt-1 text-white text-base  py-1 px-2 rounded-[8px] bg-transparent border h-[100px] focus:outline-none border-white focus:border-white focus:ring-0 resize-none",placeholder:"Overview",readOnly:!0})]})})]})},R=({role:c})=>{const[m,s]=i.useState(!1);return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:" max:w-[900px] flex flex-col space-y-2 ",children:[e.jsxs("div",{className:"flex ",children:[e.jsx(A,{setLoader:s,role:c}),e.jsx($,{setLoader:s})]}),e.jsxs("div",{className:"",children:[e.jsx(T,{role:c}),e.jsx(P,{setLoader:s})]})]}),m&&e.jsx(z,{})]})};export{R as default};
