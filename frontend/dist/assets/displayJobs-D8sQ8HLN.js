import{u as $,b as E,r as n,q as O,A as v,j as e,L as R,F as r,i as T,k as C,l as B,m as I,f as M,p as P,n as U}from"./index-BCt3kAVG.js";const Z=({jobType:x})=>{const i=$(s=>s?.developerRegisterData._id),F=E(),j=n.useRef(!0),[d,g]=n.useState([]),[h,y]=n.useState(0),[m,f]=n.useState([]),[N,b]=n.useState(!1),[u,A]=n.useState(""),[l,p]=n.useState({qualification:[],experienceLevel:[],sort:"",search:""}),q=s=>{F(`/dev/job/${s}`)};n.useEffect(()=>{const s=setTimeout(()=>{p(a=>({...a,search:u}))},500);return()=>{clearTimeout(s)}},[u]),n.useEffect(()=>{const s=x==="savedJobs"?"savedJobs":"allJobs";j.current&&(j.current=!1,b(!0));const a={};l.qualification.length>0&&(a.qualification=l.qualification),l.experienceLevel.length>0&&(a.experienceLevel=l.experienceLevel),l.sort.length>0&&(a.sort=l.sort),l.search.length>0&&(a.search=l.search);const t=O.stringify(a,{arrayFormat:"bracket"});console.log("query = ",t),v.get(`/dev/${s}/${i}?${t}`).then(c=>{console.log("response of savedJobs = ",c.data),s==="savedJobs"?(console.log("savedJobs  = ",c.data.data),g(c.data.data)):(g(c.data.data),f(c.data.savedJobs))}).catch(()=>{}).finally(()=>{b(!1)})},[i,x,h,l]);const D=s=>{const a=P(s);return U(a,{addSuffix:!0})},L=(s,a)=>{s.stopPropagation(),v.patch(`/dev/saveJob/${i}`,{jobId:a}).then(()=>{y(()=>h+1),f(t=>[...t,a])})},k=(s,a)=>{s.stopPropagation(),v.patch(`/dev/unSaveJob/${i}`,{jobId:a}).then(()=>{const t=m.filter(c=>c!==a);y(()=>h+1),f(()=>[...t])})},w=s=>{const{name:a,value:t,checked:c}=s.target;p(J=>{let o=[...J[a]];return c?o.push(t):o=o.filter(_=>_!==t),{...J,[a]:o}})},S=s=>{const{name:a,value:t}=s.target;p(c=>({...c,[a]:t}))};return e.jsx(e.Fragment,{children:N?e.jsx(R,{}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"fixed flex flex-col space-y-2  py-5 px-10 rounded-xl bg-opacity-[15%] shadow-custom-black text-white h-auto",children:[e.jsx("h1",{className:"text-xl font-semibold",children:"Filter by"}),e.jsxs("div",{className:"flex flex-col space-y-1",children:[e.jsx("h1",{children:"Qualification"}),e.jsx("div",{className:"flex flex-col",children:["Doctorate/phd","Masters","Bachelors","12","Any"].map(s=>e.jsxs("label",{children:[e.jsx("input",{type:"checkbox",name:"qualification",value:s,className:"mr-1",onChange:w}),s]},s))})]}),e.jsxs("div",{className:"flex flex-col space-y-1",children:[e.jsx("h1",{children:"Experience Level"}),e.jsx("div",{className:"flex flex-col",children:["0-1 years","1-3 years","3-6 years","6-10 years","more than 10 years"].map(s=>e.jsxs("label",{children:[e.jsx("input",{type:"checkbox",name:"experienceLevel",value:s,className:"mr-1",onChange:w}),s]},s))})]}),e.jsx("h1",{className:"text-xl font-semibold",children:"Sort by"}),e.jsxs("div",{className:"text-white flex flex-col",children:[e.jsxs("label",{children:[e.jsx("input",{type:"checkbox",name:"sort",value:"1",checked:l.sort==="1",className:"mr-1",onChange:S}),"A - Z"]}),e.jsxs("label",{children:[e.jsx("input",{type:"checkbox",name:"sort",value:"-1",checked:l.sort==="-1",className:"mr-1",onChange:S}),"Z-A"]})]})]}),e.jsx("div",{className:" space-x-3",children:e.jsxs("div",{className:"pl-[235px] space-y-2",children:[e.jsxs("div",{className:"w-[71%] flex flex-col fixed items-center justify-center",children:[e.jsx("div",{className:"w-full relative ",children:e.jsx("input",{type:"text",placeholder:"Search jobs based on the skills..",value:u,onChange:s=>A(s.target.value),className:"w-3/4 relative justify-center placeholder:text-black rounded-lg px-10"})}),e.jsx(r,{className:"h-5 text-black absolute left-3",icon:T})]}),d.length>0?e.jsx(e.Fragment,{children:e.jsx("div",{className:"flex pt-[50px] ",children:e.jsx("div",{children:d.length>0&&d.map(s=>e.jsxs("div",{className:" bg-opacity-[15%] rounded-[15px] shadow-custom-black h-[290px] w-[730px]  mb-[20px] px-5 py-3 text-white transition-transform duration-75 ",onClick:()=>q(s._id),children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("h1",{className:"text-2xl font-bold",children:s.jobTitle}),e.jsxs("div",{className:"flex space-x-5",children:[e.jsx("span",{children:D(s.createdAt)}),m.length>0&&m.includes(s._id)?e.jsx(r,{className:"h-[23px]",icon:C,onClick:a=>k(a,s._id)}):x==="savedJobs"?e.jsx(r,{className:"h-[23px]",icon:C,onClick:a=>k(a,s._id)}):e.jsx(r,{className:"h-[23px]",icon:B,onClick:a=>L(a,s._id)})]})]}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("h1",{className:"text-slate-400 text-xs",children:s.companyDetails[0]?.companyName}),e.jsx("h1",{className:"text-slate-400 text-xs",children:s.companyDetails[0]?.isVerified?e.jsxs(e.Fragment,{children:["verified",e.jsx(r,{className:"ml-1",icon:I})]}):e.jsxs(e.Fragment,{children:["not verified",e.jsx(r,{className:"ml-1",icon:M})]})})]}),e.jsx("div",{children:e.jsx("h1",{className:"mt-2 max-h-[100px]  overflow-y-auto",children:s.description})}),e.jsx("div",{className:"mt-3 flex  flex-wrap max-h-[80px] overflow-y-auto",children:s.skills.length>0&&s.skills.map((a,t)=>e.jsx("button",{className:"bg-transparent mt-1 border-violet border-2 rounded-[8px] mr-1 px-4 py-[3px]",children:a},t))})]},s._id))})})}):N?e.jsx(e.Fragment,{}):e.jsx("div",{className:"flex justify-center",children:e.jsx("h1",{className:"text-white text-6xl",children:"There Are no saved jobs"})})]})})]})})};export{Z as default};
