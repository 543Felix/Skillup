import{r,u as C,A as y,j as e,F as g,f as R,a as F,B as x,b as S,c as A,d as $,e as q,g as W,h as P,L as U}from"./index-BCt3kAVG.js";import{P as M,A as _,C as I}from"./certificates-DEHo583G.js";const z=({setLoader:u})=>{const[m,c]=r.useState(!1),[l,N]=r.useState({role:"",description:"",qualification:""}),[i,a]=r.useState({role:"",description:"",qualification:""}),p=C(n=>n.developerRegisterData._id);r.useEffect(()=>{y.get(`/dev/profile?id=${p}`).then(n=>{if(n.data.data){const{role:o,description:b,qualification:j}=n.data.data;N({role:o,description:b,qualification:j}),a({role:o,description:b,qualification:j})}})},[p]);function h(n){const{name:o,value:b}=n.target;a(j=>({...j,[o]:b}))}const v=n=>{if(n.preventDefault(),i.role.trim().length===0){x.error("Role field cannot be empty");return}else if(i.description.trim().length===0){x.error("Description cannot be empty");return}y.post(`/dev/profileRoleandDescription?id=${p}`,{data:i}).then(o=>{c(!1),u(!0),o.status===200&&(N(()=>i),x.success("role and description updated successfully"))}).catch(o=>{x.error(o.message)}).finally(()=>{u(!1)})};return e.jsxs(e.Fragment,{children:[m&&e.jsx("div",{className:"fixed top-0 left-0 z-30 w-full h-full flex justify-center items-center bg-black bg-opacity-45",children:e.jsxs("div",{className:"h-auto w-[550px] bg-white rounded-[25px] p-8",children:[e.jsx("div",{className:"flex justify-end",children:e.jsx(g,{className:"h-6 text-black",icon:R,onClick:()=>c(!1)})}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("label",{className:"text-black ml-1  font-semibold ",htmlFor:"",children:"Role"}),e.jsx("input",{type:"text",value:i.role,name:"role",className:" border border-gray-600 bg-transparent placeholder-text-black text-black focus:outline-none px-4 rounded-[12px]",onChange:h,required:!0,pattern:"^[A-Za-z]+(?: [A-Za-z]+)+$",title:"Please enter a valid role consisting of letters and spaces."}),e.jsx("label",{className:"text-black ml-1  font-semibold ",htmlFor:"",children:"Description"}),e.jsx("textarea",{value:i.description,name:"description",className:" border border-gray-600 bg-transparent placeholder-text-black text-black focus:outline-none px-4 rounded-[12px]",onChange:h,required:!0,rows:4,cols:50,title:"Please use only letters, numbers, spaces, and punctuation marks in the description."}),e.jsxs("div",{className:"flex flex-col text-black",children:[e.jsx("label",{className:"font-semibold ml-1",htmlFor:"qualification",children:"Select your highest qualification"}),e.jsxs("select",{className:"w-full h-10 p-2 rounded-[10px]","aria-placeholder":"select education",name:"qualification",id:"",onChange:h,children:[e.jsx("option",{value:"",selected:!0,children:"Select an option"}),e.jsx("option",{value:"Doctorate/Phd",children:"Doctorate/Phd"}),e.jsx("option",{value:"Masters",children:"Masters"}),e.jsx("option",{value:"Bachelors/Diploma",children:"Bachelors/Diploma"}),e.jsx("option",{value:"12th",children:"12th"})]})]}),e.jsx("div",{className:"flex flex-col mt-[50px]  ",children:e.jsx("button",{className:"bg-violet self-end px-4 py-2 rounded-[25px]",onClick:v,children:"Save changes"})})]})]})}),e.jsxs("div",{className:"w-full relative bg-slate-500 bg-opacity-[15%]  col-span-3 rounded-[15px] p-5  ml-2 shadow-lg shadow-black",children:[e.jsx("div",{className:"absolute right-7 top-3  border-2 rounded-full h-7 w-7 text-white border-white flex justify-center items-center",onClick:()=>c(!0),children:e.jsx(g,{className:"flex items-center h-3  w-3",icon:F})}),e.jsxs("div",{className:"flex flex-col space-y-1",children:[e.jsxs("div",{className:"flex flex-col ",children:[e.jsx("label",{htmlFor:"",className:"text-sm font-semibold",children:"Role"}),e.jsx("input",{className:"w-full bg-transparent border-2 text-xl border-white focus:ring-0 focus:border-white rounded-lg ",readOnly:!0,value:l.role,type:"text"})]}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("label",{htmlFor:"",className:"text-sm font-semibold",children:"Description"}),e.jsx("textarea",{className:"bg-transparent h-[90px] border-2 text-lg px-3 border-white focus:ring-0 focus:border-white rounded-lg",name:"",readOnly:!0,value:l.description,id:""})]}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("label",{htmlFor:"",className:"text-sm font-semibold",children:"Education qualification"}),e.jsx("input",{className:"bg-transparent  border-2 text-lg border-white focus:ring-0 focus:border-white rounded-lg",readOnly:!0,value:l.qualification,type:"text"})]})]})]})]})},O=({setLoader:u})=>{const[m,c]=r.useState(!1),[l,N]=r.useState(""),[i,a]=r.useState(""),[p,h]=r.useState(),v=r.useRef(null),n=S(),o=C(t=>t.developerRegisterData._id);r.useEffect(()=>{y.get(`/dev/resume/${o}`).then(t=>{t.data&&N(t.data.resume)})},[o]);const b=()=>{v.current.click()},j=t=>{const s=t.target.files&&t.target.files[0];s&&(a(URL.createObjectURL(s)),h(s))},w=t=>{t.preventDefault(),console.log("uploadCertificateButton is clicked"),p?(u(!0),$(p).then(s=>{y.patch("/dev/uploadResume",{url:s?.url,id:o}).then(d=>{d.status===200&&(N(s?.url),D(),x.success("resume uploaded successfully"))}).catch(()=>{})}).catch(s=>{x.error(s)}).finally(()=>{u(!1)})):x.error("select certificates")},D=()=>{a(""),h(void 0),c(!1)};return e.jsxs(e.Fragment,{children:[m===!0&&e.jsx("div",{className:"fixed top-0 left-0 z-10 w-full h-full flex justify-center items-center bg-black bg-opacity-65",children:e.jsxs("div",{className:"bg-slate-800 px-10 py-5 h-auto w-[600px] rounded-[25px]",children:[e.jsxs("div",{className:"flex justify-between  ",children:[e.jsx("h1",{className:"text-white font-semibold  text-2xl",children:l.length>0?"Resume":"Upload Resume"}),e.jsx(g,{icon:R,className:"text-white h-7",onClick:D})]}),e.jsx("div",{}),i&&e.jsx("div",{className:"flex flex-col space-y-2",children:e.jsx("iframe",{className:"w-[300px] h-[250px]",src:i})}),e.jsxs("div",{className:"flex justify-end pt-5",children:[e.jsx("input",{type:"file",ref:v,hidden:!0,onChange:j,accept:".pdf"}),e.jsx("button",{className:"text-violet mr-5",onClick:b,children:"choose file"}),e.jsx("button",{className:"bg-violet text-white px-5 justify-center items-center p-1 rounded-[15px]",onClick:w,children:"upload"})]})]})}),e.jsx("div",{className:" bg-slate-500 bg-opacity-[15%] shadow-lg shadow-black rounded-[10px] p-6",children:e.jsxs("div",{className:"flex justify-between",children:[e.jsx("h1",{className:"text-white text-2xl font-semibold",children:typeof l=="string"&&l.trim().length>0?"Resume uploaded":"Upload Resume"}),e.jsxs("div",{className:"flex space-x-3 items-center",children:[e.jsx("button",{className:"bg-violet text-white font-semibold px-5 py-1 rounded-lg",onClick:()=>{typeof l=="string"&&l.trim().length===0?c(!0):n("/dev/pdfView",{state:{url:l}})},children:typeof l=="string"&&l.trim().length>0?"View":"Upload"}),"          ",e.jsx(g,{icon:A})]})]})})]})},B=({role:u})=>{const m=C(t=>u==="dev"?t.developerRegisterData._id:t.companyRegisterData._id),[c,l]=r.useState([]),[N,i]=r.useState(!1),[a,p]=r.useState({companyName:"",role:"",startDate:"",endDate:""}),[h,v]=r.useState("Add");r.useEffect(()=>{y.get(`/dev/workExperience/${m}`).then(t=>{const{workExperience:s}=t.data;l(s)}).catch(()=>{x.error("An unexpected error occured while fetching data")})},[m]);const n=(t,s)=>{p(d=>({...d,[t]:s}))},o=()=>{if(a.companyName.trim().length===0)x.error("Company name field cannot be empty");else if(a.role.trim().length===0)x.error("Role field cannot be empty");else if(a.startDate.trim().length===0)x.error("startDate cannot be empty");else if(a.endDate.trim().length===0)x.error("endDate cannot be empty");else{const t=h==="Add"?"add":"update";y.post(`/dev/${t}WorkExperience`,{id:m,workData:a}).then(s=>{if(s.status===200&&t==="add"){const d=new Date(a.startDate);l(f=>{const k=f.findIndex(E=>new Date(E.startDate)<d);return k>-1?[...f.slice(0,k),a,...f.slice(k)]:[...f,a]})}else s.status===200&&t==="update"&&l(d=>d.map(f=>f._id===a._id?a:f))}).catch(()=>{x.error("Error occured while updating query")}).finally(()=>{p(()=>({companyName:"",role:"",startDate:"",endDate:""})),i(!1)}),v("Add")}},b=t=>{y.patch(`/dev/deleteWorkExperience/${m}/${t}`).then(s=>{s.status===200&&l(d=>d.filter(f=>f._id!==t))}).finally(()=>{i(!1)})},j=()=>{const t=new Date,s=t.getFullYear(),d=String(t.getMonth()+1).padStart(2,"0");return`${s}-${d}`},w=t=>{if(!t)return"";if(t==="current")return t;const[s,d]=t.split("-");return new Date(parseInt(s),parseInt(d)-1).toLocaleString("default",{month:"long",year:"numeric"})},D=t=>{v("Update"),p(t),i(!0)};return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:" bg-slate-500 bg-opacity-[15%] shadow-lg shadow-black rounded-[10px] p-6",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("h1",{className:"text-white text-2xl font-semibold",children:"Work Experience"}),e.jsx(g,{className:"text-white h-[30px]",icon:q,onClick:()=>i(!0)})]}),c.length>0&&e.jsx("div",{className:"mt-2",children:c.map(t=>e.jsxs("div",{className:"flex flex-col",children:[e.jsxs("div",{className:"text-white flex space-x-3 items-center",children:[e.jsx("h1",{className:"text-xl ",children:t.role}),e.jsx(g,{className:"text-[15px]",icon:W,onClick:()=>D(t)}),e.jsx(g,{className:"text-[15px]",icon:P,onClick:()=>b(t._id)})]}),e.jsxs("div",{className:"flex space-x-2 text-gray-400 text-sm font-light",children:[e.jsx("span",{children:t.companyName}),e.jsx("span",{children:`${w(t.startDate)} - ${w(t.endDate)}`})]})]},t._id))})]}),N&&e.jsx("div",{className:"fixed top-0 pt-0 left-0 z-30 w-full h-full flex justify-center items-center bg-black bg-opacity-75 ",children:e.jsxs("div",{className:"h-auto   w-[700px] text-black bg-white p-8  rounded-[15px] ",children:[e.jsxs("div",{className:"flex items-center justify-between ",children:[e.jsx("h1",{className:" font-semibold text-2xl",children:"Work Experience"}),e.jsx(g,{className:" h-[30px]",icon:R,onClick:()=>i(!1)})]}),e.jsxs("div",{className:"mt-2 flex flex-col space-y-3 ",children:[e.jsxs("div",{className:"flex flex-col ",children:[e.jsx("label",{className:"font-semibold text-sm ",htmlFor:"companyName",children:"Company Name"}),e.jsx("input",{className:"w-full h-12 p-2 rounded-[10px]",value:a?.companyName,name:"companyName",type:"text",onChange:t=>n("companyName",t.target.value)})]}),e.jsxs("div",{className:"flex flex-col ",children:[e.jsx("label",{className:"font-semibold text-sm ",htmlFor:"role",children:"Role"}),e.jsx("input",{className:"w-full h-12 p-2 rounded-[10px]",value:a?.role,name:"role",type:"text",onChange:t=>n("role",t.target.value)})]}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsxs("div",{className:"flex flex-col w-1/2 ",children:[e.jsx("label",{className:"font-semibold text-sm ",htmlFor:"startDate",children:"Start Date "}),e.jsx("input",{className:"w-full h-12 p-2 rounded-[10px]",value:a?.startDate,name:"startDate",type:"month",onChange:t=>n("startDate",t.target.value),max:j()})]}),e.jsxs("div",{className:"flex flex-col w-1/2 ",children:[e.jsxs("div",{className:"flex space-x-2 items-center",children:[e.jsx("label",{className:"font-semibold text-sm ",htmlFor:"endDate",children:"End Date"}),e.jsx("span",{className:"text-sm mb-1",children:"( if currently working select current )"})]}),e.jsxs("div",{className:"relative ",children:[e.jsx("input",{className:"w-full h-12 p-2 rounded-[10px]",value:a?.endDate,name:"endDate",type:"month",onChange:t=>n("endDate",t.target.value),max:j()}),e.jsx("button",{className:" absolute right-[10%] mt-2 bg-black text-white px-5 py-1",onClick:()=>n("endDate","current"),children:"Current"})]})]})]})]}),e.jsx("div",{className:"mt-2 flex justify-end",children:e.jsx("button",{className:"bg-violet text-white font-semibold px-5 py-1 rounded",onClick:o,children:h})})]})})]})},V=({role:u})=>{const[m,c]=r.useState(!1);return e.jsxs(e.Fragment,{children:[m&&e.jsx(U,{}),e.jsxs("div",{className:"flex flex-col space-y-2 w-[900px] text-white z-0",children:[e.jsxs("div",{className:"flex   text-white ",children:[e.jsx(M,{setLoader:c,role:u}),e.jsx(z,{setLoader:c})]}),e.jsx(_,{role:u}),e.jsx(I,{setLoader:c}),e.jsx(B,{role:u}),e.jsx(O,{setLoader:c})]})]})};export{V as default};
