import{r as l,u as C,A as y,j as e,F as N,f as R,a as F,B as i,b as S,c as A,d as $,e as q,g as W,L as P}from"./index-C_PH2e5J.js";import{P as U,A as M,C as _}from"./certificates-CgUTxDK6.js";const I=({setLoader:x})=>{const[m,r]=l.useState(!1),[o,w]=l.useState({role:"",description:"",qualification:""}),[n,s]=l.useState({role:"",description:"",qualification:""}),p=C(a=>a.developerRegisterData._id);l.useEffect(()=>{y.get(`/dev/profile?id=${p}`).then(a=>{if(a.data.data){const{role:d,description:b,qualification:j}=a.data.data;w({role:d,description:b,qualification:j}),s({role:d,description:b,qualification:j})}})},[p]);function f(a){const{name:d,value:b}=a.target;s(j=>({...j,[d]:b}))}const v=a=>{if(a.preventDefault(),n.role.trim().length===0){i.error("Role field cannot be empty");return}else if(n.description.trim().length===0){i.error("Description cannot be empty");return}y.post(`/dev/profileRoleandDescription?id=${p}`,{data:n}).then(d=>{r(!1),x(!0),d.status===200&&(w(()=>n),i.success("role and description updated successfully"))}).catch(d=>{i.error(d.message)}).finally(()=>{x(!1)})};return e.jsxs(e.Fragment,{children:[m&&e.jsx("div",{className:"fixed top-0 left-0 z-30 w-full h-full flex justify-center items-center bg-black bg-opacity-45",children:e.jsxs("div",{className:"h-auto w-[550px] bg-white rounded-[25px] p-8",children:[e.jsx("div",{className:"flex justify-end",children:e.jsx(N,{className:"h-6 text-black",icon:R,onClick:()=>r(!1)})}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("label",{className:"text-black ml-1  font-semibold ",htmlFor:"",children:"Role"}),e.jsx("input",{type:"text",value:n.role,name:"role",className:" border border-gray-600 bg-transparent placeholder-text-black text-black focus:outline-none px-4 rounded-[12px]",onChange:f,required:!0,pattern:"^[A-Za-z]+(?: [A-Za-z]+)+$",title:"Please enter a valid role consisting of letters and spaces."}),e.jsx("label",{className:"text-black ml-1  font-semibold ",htmlFor:"",children:"Description"}),e.jsx("textarea",{value:n.description,name:"description",className:" border border-gray-600 bg-transparent placeholder-text-black text-black focus:outline-none px-4 rounded-[12px]",onChange:f,required:!0,rows:4,cols:50,title:"Please use only letters, numbers, spaces, and punctuation marks in the description."}),e.jsxs("div",{className:"flex flex-col text-black",children:[e.jsx("label",{className:"font-semibold ml-1",htmlFor:"qualification",children:"Select your highest qualification"}),e.jsxs("select",{className:"w-full h-10 p-2 rounded-[10px]","aria-placeholder":"select education",name:"qualification",id:"",onChange:f,children:[e.jsx("option",{value:"",selected:!0,children:"Select an option"}),e.jsx("option",{value:"Doctorate/Phd",children:"Doctorate/Phd"}),e.jsx("option",{value:"Masters",children:"Masters"}),e.jsx("option",{value:"Bachelors/Diploma",children:"Bachelors/Diploma"}),e.jsx("option",{value:"12th",children:"12th"})]})]}),e.jsx("div",{className:"flex flex-col mt-[50px]  ",children:e.jsx("button",{className:"bg-violet self-end px-4 py-2 rounded-[25px]",onClick:v,children:"Save changes"})})]})]})}),e.jsxs("div",{className:"w-full relative bg-slate-500 bg-opacity-[15%]  col-span-3 rounded-[15px] p-5  ml-2 shadow-lg shadow-black",children:[e.jsx("div",{className:"absolute right-7 top-3  border-2 rounded-full h-7 w-7 text-white border-white flex justify-center items-center",onClick:()=>r(!0),children:e.jsx(N,{className:"flex items-center h-3  w-3",icon:F})}),e.jsxs("div",{className:"flex flex-col space-y-1",children:[e.jsxs("div",{className:"flex flex-col ",children:[e.jsx("label",{htmlFor:"",className:"text-sm font-semibold",children:"Role"}),e.jsx("input",{className:"w-full bg-transparent border-2 text-xl border-white focus:ring-0 focus:border-white rounded-lg ",readOnly:!0,value:o.role,type:"text"})]}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("label",{htmlFor:"",className:"text-sm font-semibold",children:"Description"}),e.jsx("textarea",{className:"bg-transparent h-[90px] border-2 text-lg px-3 border-white focus:ring-0 focus:border-white rounded-lg",name:"",readOnly:!0,value:o.description,id:""})]}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("label",{htmlFor:"",className:"text-sm font-semibold",children:"Education qualification"}),e.jsx("input",{className:"bg-transparent  border-2 text-lg border-white focus:ring-0 focus:border-white rounded-lg",readOnly:!0,value:o.qualification,type:"text"})]})]})]})]})},z=({setLoader:x})=>{const[m,r]=l.useState(!1),[o,w]=l.useState(""),[n,s]=l.useState(""),[p,f]=l.useState(),v=l.useRef(null),a=C(g=>g.developerRegisterData._id);l.useEffect(()=>{y.get(`/dev/resume/${a}`)},[a]);const d=()=>{v.current.click()},b=g=>{const t=g.target.files&&g.target.files[0];t&&(s(URL.createObjectURL(t)),f(t))},j=g=>{g.preventDefault(),console.log("uploadCertificateButton is clicked"),p?(x(!0),A(p).then(t=>{y.patch("/dev/uploadResume",{url:t?.url,id:a}).then(c=>{c.status===200&&(w(t?.url),D(),i.success("resume uploaded successfully"))}).catch(()=>{})}).catch(t=>{i.error(t)}).finally(()=>{x(!1)})):i.error("select certificates")},D=()=>{s(""),f(void 0),r(!1)};return e.jsxs(e.Fragment,{children:[m===!0&&e.jsx("div",{className:"fixed top-0 left-0 z-10 w-full h-full flex justify-center items-center bg-black bg-opacity-65",children:e.jsxs("div",{className:"bg-slate-800 px-10 py-5 h-auto w-[600px] rounded-[25px]",children:[e.jsxs("div",{className:"flex justify-between  ",children:[e.jsx("h1",{className:"text-white font-semibold  text-2xl",children:"Upload Resume"}),e.jsx(N,{icon:R,className:"text-white h-7",onClick:D})]}),e.jsx("div",{}),n&&e.jsx("div",{className:"flex flex-col space-y-2",children:e.jsx("iframe",{className:"w-[300px] h-[250px]",src:n})}),e.jsxs("div",{className:"flex justify-end pt-5",children:[e.jsx("input",{type:"file",ref:v,hidden:!0,onChange:b,accept:".pdf"}),e.jsx("button",{className:"text-violet mr-5",onClick:d,children:"choose file"}),e.jsx("button",{className:"bg-violet text-white px-5 justify-center items-center p-1 rounded-[15px]",onClick:j,children:"upload"})]})]})}),e.jsx("div",{className:" bg-slate-500 bg-opacity-[15%] shadow-lg shadow-black rounded-[10px] p-6",children:e.jsxs("div",{className:"flex justify-between",children:[e.jsx("h1",{className:"text-white text-2xl font-semibold",children:o.trim().length>0?"Resume uploaded":"Upload Resume"}),e.jsxs("div",{className:"flex space-x-3 items-center",children:[e.jsx("button",{className:"bg-violet text-white font-semibold px-5 py-1 rounded-lg",onClick:()=>{o.trim().length===0&&r(!0)},children:o.trim().length>0?"View":"Upload"}),"          ",e.jsx(N,{icon:S})]})]})})]})},O=({role:x})=>{const m=C(t=>x==="dev"?t.developerRegisterData._id:t.companyRegisterData._id),[r,o]=l.useState([]),[w,n]=l.useState(!1),[s,p]=l.useState({companyName:"",role:"",startDate:"",endDate:""}),[f,v]=l.useState("Add");l.useEffect(()=>{y.get(`/dev/workExperience/${m}`).then(t=>{const{workExperience:c}=t.data;o(c)}).catch(()=>{i.error("An unexpected error occured while fetching data")})},[m]);const a=(t,c)=>{p(u=>({...u,[t]:c}))},d=()=>{if(s.companyName.trim().length===0)i.error("Company name field cannot be empty");else if(s.role.trim().length===0)i.error("Role field cannot be empty");else if(s.startDate.trim().length===0)i.error("startDate cannot be empty");else if(s.endDate.trim().length===0)i.error("endDate cannot be empty");else{const t=f==="Add"?"add":"update";y.post(`/dev/${t}WorkExperience`,{id:m,workData:s}).then(c=>{if(c.status===200&&t==="add"){const u=new Date(s.startDate);o(h=>{const k=h.findIndex(E=>new Date(E.startDate)<u);return k>-1?[...h.slice(0,k),s,...h.slice(k)]:[...h,s]})}else c.status===200&&t==="update"&&o(u=>u.map(h=>h._id===s._id?s:h))}).catch(()=>{i.error("Error occured while updating query")}).finally(()=>{p(()=>({companyName:"",role:"",startDate:"",endDate:""})),n(!1)}),v("Add")}},b=t=>{y.patch(`/dev/deleteWorkExperience/${m}/${t}`).then(c=>{c.status===200&&o(u=>u.filter(h=>h._id!==t))}).finally(()=>{n(!1)})},j=()=>{const t=new Date,c=t.getFullYear(),u=String(t.getMonth()+1).padStart(2,"0");return`${c}-${u}`},D=t=>{if(!t)return"";if(t==="current")return t;const[c,u]=t.split("-");return new Date(parseInt(c),parseInt(u)-1).toLocaleString("default",{month:"long",year:"numeric"})},g=t=>{v("Update"),p(t),n(!0)};return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:" bg-slate-500 bg-opacity-[15%] shadow-lg shadow-black rounded-[10px] p-6",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("h1",{className:"text-white text-2xl font-semibold",children:"Work Experience"}),e.jsx(N,{className:"text-white h-[30px]",icon:$,onClick:()=>n(!0)})]}),r.length>0&&e.jsx("div",{className:"mt-2",children:r.map(t=>e.jsxs("div",{className:"flex flex-col",children:[e.jsxs("div",{className:"text-white flex space-x-3 items-center",children:[e.jsx("h1",{className:"text-xl ",children:t.role}),e.jsx(N,{className:"text-[15px]",icon:q,onClick:()=>g(t)}),e.jsx(N,{className:"text-[15px]",icon:W,onClick:()=>b(t._id)})]}),e.jsxs("div",{className:"flex space-x-2 text-gray-400 text-sm font-light",children:[e.jsx("span",{children:t.companyName}),e.jsx("span",{children:`${D(t.startDate)} - ${D(t.endDate)}`})]})]},t._id))})]}),w&&e.jsx("div",{className:"fixed top-0 pt-0 left-0 z-30 w-full h-full flex justify-center items-center bg-black bg-opacity-75 ",children:e.jsxs("div",{className:"h-auto   w-[700px] text-black bg-white p-8  rounded-[15px] ",children:[e.jsxs("div",{className:"flex items-center justify-between ",children:[e.jsx("h1",{className:" font-semibold text-2xl",children:"Work Experience"}),e.jsx(N,{className:" h-[30px]",icon:R,onClick:()=>n(!1)})]}),e.jsxs("div",{className:"mt-2 flex flex-col space-y-3 ",children:[e.jsxs("div",{className:"flex flex-col ",children:[e.jsx("label",{className:"font-semibold text-sm ",htmlFor:"companyName",children:"Company Name"}),e.jsx("input",{className:"w-full h-12 p-2 rounded-[10px]",value:s?.companyName,name:"companyName",type:"text",onChange:t=>a("companyName",t.target.value)})]}),e.jsxs("div",{className:"flex flex-col ",children:[e.jsx("label",{className:"font-semibold text-sm ",htmlFor:"role",children:"Role"}),e.jsx("input",{className:"w-full h-12 p-2 rounded-[10px]",value:s?.role,name:"role",type:"text",onChange:t=>a("role",t.target.value)})]}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsxs("div",{className:"flex flex-col w-1/2 ",children:[e.jsx("label",{className:"font-semibold text-sm ",htmlFor:"startDate",children:"Start Date "}),e.jsx("input",{className:"w-full h-12 p-2 rounded-[10px]",value:s?.startDate,name:"startDate",type:"month",onChange:t=>a("startDate",t.target.value),max:j()})]}),e.jsxs("div",{className:"flex flex-col w-1/2 ",children:[e.jsxs("div",{className:"flex space-x-2 items-center",children:[e.jsx("label",{className:"font-semibold text-sm ",htmlFor:"endDate",children:"End Date"}),e.jsx("span",{className:"text-sm mb-1",children:"( if currently working select current )"})]}),e.jsxs("div",{className:"relative ",children:[e.jsx("input",{className:"w-full h-12 p-2 rounded-[10px]",value:s?.endDate,name:"endDate",type:"month",onChange:t=>a("endDate",t.target.value),max:j()}),e.jsx("button",{className:" absolute right-[10%] mt-2 bg-black text-white px-5 py-1",onClick:()=>a("endDate","current"),children:"Current"})]})]})]})]}),e.jsx("div",{className:"mt-2 flex justify-end",children:e.jsx("button",{className:"bg-violet text-white font-semibold px-5 py-1 rounded",onClick:d,children:f})})]})})]})},T=({role:x})=>{const[m,r]=l.useState(!1);return e.jsxs(e.Fragment,{children:[m&&e.jsx(P,{}),e.jsxs("div",{className:"flex flex-col space-y-2 w-[900px] text-white z-0",children:[e.jsxs("div",{className:"flex   text-white ",children:[e.jsx(U,{setLoader:r,role:x}),e.jsx(I,{setLoader:r})]}),e.jsx(M,{role:x}),e.jsx(_,{setLoader:r}),e.jsx(O,{role:x}),e.jsx(z,{setLoader:r})]})]})};export{T as default};
